{% extends "base.html" %}

{% block title %}Help Center · Quote Tool{% endblock %}

{% block content %}
<div class="container px-0">
  <div class="mb-4">
    <h2 class="mb-2">Help Center</h2>
    <p class="text-muted mb-0">
      Use this guide to understand how quote calculations, account access,
      booking workflows, and policy terms work across the Freight Services portal.
    </p>
  </div>

  <div class="accordion" id="helpAccordion">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingCalculation">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCalculation" aria-expanded="true" aria-controls="collapseCalculation">
          1) Shipment Calculation Guide
        </button>
      </h2>
      <div id="collapseCalculation" class="accordion-collapse collapse show" aria-labelledby="headingCalculation" data-bs-parent="#helpAccordion">
        <div class="accordion-body">
          <h3 class="h5">Chargeable Weight Rule</h3>
          <p class="mb-2">Every quote uses the greater value between actual weight and dimensional weight. This final value is the chargeable (billable) weight.</p>

          <h3 class="h5">166 Factor Formula</h3>
          <p class="mb-2">Dimensional weight is calculated as:</p>
          <p><code>(Length × Width × Height) ÷ 166</code></p>
          <p class="text-muted">Use inches for dimensions and pounds for weight.</p>

          <h3 class="h5">ZIP Code Shipment Notes</h3>
          <p class="mb-2">Origin and destination ZIP codes may include shipment notes. These notes provide local handling guidance that can affect services needed at pickup or delivery.</p>

          <h3 class="h5">Final Rate Approval</h3>
          <p class="mb-2">Invoices may increase after final review when shipment conditions differ from the original request, including:</p>
          <ul class="mb-0">
            <li>Weight discrepancies between provided and verified shipment weight.</li>
            <li>Site requirements discovered during execution (for example, dock constraints or special handling needs).</li>
            <li>Limited access designations identified after booking.</li>
          </ul>

          {% if is_internal %}
          <div class="alert alert-secondary mt-3 mb-0">
            <strong>Internal technical notes:</strong>
            Margin controls and adjustment math are applied in the quote engine before total presentation. ZIP notes are sourced from ZIP-zone records and mapped using origin/destination ZIP lookups.
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingAccount">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAccount" aria-expanded="false" aria-controls="collapseAccount">
          2) User Account &amp; Security
        </button>
      </h2>
      <div id="collapseAccount" class="accordion-collapse collapse" aria-labelledby="headingAccount" data-bs-parent="#helpAccordion">
        <div class="accordion-body">
          <h3 class="h5">Registration Requirements</h3>
          <p>Account registration requires a valid business email address. Personal or disposable email addresses are not accepted for production quoting access.</p>

          <h3 class="h5">Password Reset Window</h3>
          <p class="mb-0">Password reset links remain valid for 24 hours from the time the request is created. If the link expires, submit a new reset request.</p>

          {% if is_internal %}
          <div class="alert alert-secondary mt-3 mb-0">
            <strong>Internal technical notes:</strong>
            Password reset tokens are time-bound and should be audited with standard account-security logging when customer access issues are escalated.
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingBooking">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBooking" aria-expanded="false" aria-controls="collapseBooking">
          3) Booking &amp; Operations
        </button>
      </h2>
      <div id="collapseBooking" class="accordion-collapse collapse" aria-labelledby="headingBooking" data-bs-parent="#helpAccordion">
        <div class="accordion-body">
          <h3 class="h5">Using Quote ID for Lookups</h3>
          <p class="mb-2">Use the generated Quote ID to retrieve saved quote details from the lookup workflow. This ID is the fastest way to reopen an existing quote.</p>

          <h3 class="h5">Pickup and Delivery Dates</h3>
          <p class="mb-2">Booking requests must include both pickup and delivery dates so dispatch can validate timeline feasibility and carrier availability.</p>

          <h3 class="h5">Send to Myself Receipts</h3>
          <p class="mb-0">Use the <strong>Send to Myself</strong> button on the quote results page to email yourself a receipt copy with pricing and shipment details.</p>

          {% if is_internal %}
          <div class="alert alert-secondary mt-3 mb-0">
            <strong>Internal technical notes:</strong>
            Quote lookup and email workflows should reuse shared quote context helpers so shipment notes, permissions, and accessorial totals remain consistent across first-load and follow-up actions.
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingLegal">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseLegal" aria-expanded="false" aria-controls="collapseLegal">
          4) Legal &amp; Privacy Policy
        </button>
      </h2>
      <div id="collapseLegal" class="accordion-collapse collapse" aria-labelledby="headingLegal" data-bs-parent="#helpAccordion">
        <div class="accordion-body">
          <h3 class="h5">Website Terms of Use</h3>
          <p class="mb-2">
            Review the complete Freight Services website terms, including
            arbitration language, class action waiver, liability disclaimer,
            intellectual property restrictions, and contact information.
          </p>
          <div class="d-flex flex-wrap gap-2 align-items-center">
            <a class="btn btn-sm btn-outline-primary" href="{{ url_for('help.terms_of_use') }}">Read Full Terms in App</a>
            <a
              class="btn btn-sm btn-outline-secondary"
              href="https://freightservices.net/wp-content/uploads/2025/09/Website-Terms-of-Use.pdf"
              target="_blank"
              rel="noopener noreferrer"
            >
              Open Official PDF
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
