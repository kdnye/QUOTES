{% extends "base.html" %}
{% block title %}Branding{% endblock %}
{% block content %}
  <h1>Company logos by rate set</h1>

  <div class="card mb-3 p-3">
    <form method="POST">
      {{ form.csrf_token }}
      <div class="mb-3">
        {{ form.rate_set.label(class="form-label") }}
        {{ form.rate_set(class="form-select") }}
        {% if form.rate_set.errors %}
          <div class="text-danger small mt-1">{{ form.rate_set.errors|join(', ') }}</div>
        {% endif %}
      </div>
      <div class="mb-3">
        {{ form.gcs_bucket_location.label(class="form-label") }}
        {{ form.gcs_bucket_location(class="form-control", placeholder="gs://bucket/path/") }}
        {% if form.gcs_bucket_location.errors %}
          <div class="text-danger small mt-1">{{ form.gcs_bucket_location.errors|join(', ') }}</div>
        {% endif %}
      </div>
      <button class="btn btn-primary">Save location</button>
    </form>
  </div>

  <h3>Existing logos</h3>
  <div class="row">
    {% for rs, logo in logos.items() %}
      <div class="col-md-4 mb-2">
        <div class="card p-2">
          <strong>{{ rs }}</strong>
          {% if logo.filename %}
            <div class="mt-2">
              <img src="{{ logo.url }}" alt="{{ rs }} logo" style="max-height:60px;">
            </div>
            <div class="small text-muted mt-1">{{ logo.filename }}</div>
            <form method="POST" action="{{ url_for('admin.branding_remove', rate_set=rs) }}" class="mt-2">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              <button class="btn btn-sm btn-danger">Remove</button>
            </form>
          {% else %}
            <div class="text-muted mt-2">No logo</div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

{% endblock %}
